# 需求文件

## 簡介

本地音樂播放器是一個基於網頁的音樂播放應用程式，允許使用者導入本地音樂檔案並進行播放、管理和組織。該應用程式提供現代化的磨砂玻璃介面設計，支援主題切換、播放清單管理、智慧專輯封面偵測和多語言介面。

## 術語表

- **系統 (System)**: 本地音樂播放器網頁應用程式
- **使用者 (User)**: 使用本地音樂播放器的人
- **音樂檔案 (Music_File)**: 使用者導入的本地音訊檔案
- **播放清單 (Playlist)**: 使用者自訂的音樂檔案集合
- **專輯封面 (Album_Cover)**: 音樂檔案的封面圖片
- **主題 (Theme)**: 應用程式的視覺配色方案（暗色或亮色）
- **收藏 (Like)**: 使用者標記喜愛的音樂檔案
- **本地儲存 (Local_Storage)**: 瀏覽器的本地資料儲存機制
- **元資料 (Metadata)**: 音樂檔案中包含的資訊（如標題、藝術家、專輯）

## 需求

### 需求 1：導入本地音樂檔案

**使用者故事：** 作為使用者，我想要導入本地音樂檔案，以便我可以在網頁播放器中播放它們。

#### 驗收標準

1. 當使用者選擇本地音樂檔案時，系統應當載入這些檔案到播放器中
2. 當使用者導入音樂檔案時，系統應當解析檔案的元資料（標題、藝術家、專輯、時長）
3. 當使用者導入音樂檔案時，系統應當將檔案資訊儲存到本地儲存中
4. 當使用者導入的檔案格式不支援時，系統應當顯示錯誤訊息並拒絕該檔案
5. 當使用者重新開啟應用程式時，系統應當從本地儲存中恢復先前導入的音樂檔案清單

### 需求 2：音樂播放功能

**使用者故事：** 作為使用者，我想要播放、暫停和控制音樂，以便我可以享受音樂。

#### 驗收標準

1. 當使用者點擊播放按鈕時，系統應當開始播放選定的音樂檔案
2. 當使用者點擊暫停按鈕時，系統應當暫停當前播放的音樂
3. 當使用者點擊下一首按鈕時，系統應當播放清單中的下一首音樂
4. 當使用者點擊上一首按鈕時，系統應當播放清單中的上一首音樂
5. 當使用者拖動進度條時，系統應當跳轉到指定的播放位置
6. 當使用者調整音量控制時，系統應當改變播放音量
7. 當使用者選擇單曲循環模式時，系統應當在當前音樂播放完畢後重新播放該音樂
8. 當使用者選擇播放清單循環模式時，系統應當在播放清單結束後從第一首重新開始播放
9. 當使用者選擇隨機播放模式時，系統應當以隨機順序播放清單中的音樂
10. 當使用者切換播放模式時，系統應當將播放模式偏好設定儲存到本地儲存中
11. 當一首音樂播放完畢且未啟用循環模式時，系統應當自動播放下一首音樂

### 需求 3：播放清單管理

**使用者故事：** 作為使用者，我想要建立和管理播放清單，以便我可以組織我的音樂。

#### 驗收標準

1. 當使用者建立新播放清單時，系統應當建立一個空的播放清單並允許使用者命名
2. 當使用者將音樂檔案加入播放清單時，系統應當將該檔案加入指定的播放清單
3. 當使用者從播放清單中移除音樂時，系統應當從該播放清單中移除該檔案但保留原始檔案
4. 當使用者刪除播放清單時，系統應當刪除該播放清單但保留其中的音樂檔案
5. 當使用者重新排序播放清單中的音樂時，系統應當更新播放順序
6. 當使用者匯出播放清單時，系統應當將播放清單資料（包含音樂檔案資訊和順序）儲存為 JSON 檔案
7. 當使用者導入 JSON 格式的播放清單檔案時，系統應當解析檔案並建立對應的播放清單
8. 當導入的 JSON 檔案格式不正確時，系統應當顯示錯誤訊息並拒絕導入
9. 當使用者修改播放清單時，系統應當將變更儲存到本地儲存中

### 需求 4：收藏功能

**使用者故事：** 作為使用者，我想要標記喜愛的音樂，以便我可以快速找到我最喜歡的歌曲。

#### 驗收標準

1. 當使用者點擊音樂的收藏按鈕時，系統應當將該音樂標記為已收藏
2. 當使用者再次點擊已收藏音樂的收藏按鈕時，系統應當取消收藏標記
3. 當使用者查看收藏清單時，系統應當顯示所有已收藏的音樂
4. 當使用者收藏或取消收藏音樂時，系統應當將變更儲存到本地儲存中
5. 當使用者重新開啟應用程式時，系統應當從本地儲存中恢復收藏狀態

### 需求 5：搜尋功能

**使用者故事：** 作為使用者，我想要搜尋音樂檔案，以便我可以快速找到特定的歌曲。

#### 驗收標準

1. 當使用者輸入搜尋關鍵字時，系統應當即時顯示符合的音樂檔案
2. 當使用者搜尋時，系統應當在標題、藝術家和專輯名稱中尋找匹配項
3. 當使用者搜尋時，系統應當支援模糊搜尋（允許部分匹配和容錯）
4. 當搜尋結果為空時，系統應當顯示「無搜尋結果」訊息
5. 當使用者清除搜尋關鍵字時，系統應當顯示所有音樂檔案
6. 當使用者點擊搜尋結果中的音樂時，系統應當播放該音樂

### 需求 6：檔案資訊查看

**使用者故事：** 作為使用者，我想要查看音樂檔案的詳細資訊，以便我可以了解檔案的元資料。

#### 驗收標準

1. 當使用者點擊檔案資訊按鈕時，系統應當顯示該音樂檔案的詳細資訊
2. 當顯示檔案資訊時，系統應當包含標題、藝術家、專輯、時長、檔案大小和格式
3. 當音樂檔案包含專輯封面時，系統應當在資訊視窗中顯示封面圖片
4. 當使用者關閉資訊視窗時，系統應當返回到先前的畫面

### 需求 7：智慧專輯封面偵測

**使用者故事：** 作為使用者，我想要系統自動偵測專輯封面，以便播放器介面更加美觀。

#### 驗收標準

1. 當音樂檔案包含嵌入的專輯封面時，系統應當提取並顯示該封面
2. 當播放音樂時，系統應當在播放器介面中顯示當前音樂的專輯封面
3. 當音樂檔案不包含專輯封面時，系統應當顯示預設的佔位圖片
4. 當專輯封面載入失敗時，系統應當顯示預設的佔位圖片

### 需求 8：專輯封面適應性配色

**使用者故事：** 作為使用者，我想要播放器根據專輯封面自動調整配色，以便獲得更沉浸的視覺體驗。

#### 驗收標準

1. 當播放音樂時，系統應當分析專輯封面的主要顏色
2. 當分析完成後，系統應當將播放器介面的強調色調整為專輯封面的主要顏色
3. 當使用者啟用適應性配色功能時，系統應當在切換音樂時自動更新配色
4. 當使用者停用適應性配色功能時，系統應當使用預設的主題配色
5. 當使用者切換適應性配色設定時，系統應當將偏好設定儲存到本地儲存中

### 需求 9：智慧分類功能

**使用者故事：** 作為使用者，我想要系統自動偵測並分類專輯和藝術家，以便我可以更好地瀏覽我的音樂庫。

#### 驗收標準

1. 當系統載入音樂檔案時，系統應當根據元資料中的藝術家資訊進行分組
2. 當系統載入音樂檔案時，系統應當根據元資料中的專輯資訊進行分組
3. 當使用者啟用分類檢視時，系統應當顯示按藝術家和專輯分組的音樂清單
4. 當使用者停用分類檢視時，系統應當顯示所有音樂的平面清單
5. 當使用者點擊藝術家或專輯時，系統應當顯示該分類下的所有音樂
6. 當使用者切換分類檢視設定時，系統應當將偏好設定儲存到本地儲存中

### 需求 10：主題切換功能

**使用者故事：** 作為使用者，我想要在暗色和亮色主題之間切換，以便在不同環境下獲得最佳的視覺體驗。

#### 驗收標準

1. 當使用者點擊主題切換按鈕時，系統應當在暗色主題和亮色主題之間切換
2. 當切換主題時，系統應當更新所有介面元素的配色
3. 當使用者切換主題時，系統應當將主題偏好設定儲存到本地儲存中
4. 當使用者重新開啟應用程式時，系統應當從本地儲存中恢復先前選擇的主題
5. 當應用程式首次載入且無儲存的主題偏好時，系統應當預設使用暗色主題

### 需求 11：磨砂玻璃介面設計

**使用者故事：** 作為使用者，我想要現代化的磨砂玻璃介面，以便獲得類似 iOS 系統的視覺體驗。

#### 驗收標準

1. 當顯示介面元素時，系統應當應用磨砂玻璃效果（backdrop-filter blur）
2. 當顯示卡片和面板時，系統應當使用半透明背景和模糊效果
3. 當使用者與介面互動時，系統應當保持流暢的動畫過渡效果
4. 當顯示播放器控制項時，系統應當使用磨砂玻璃樣式的背景

### 需求 12：多語言支援（i18n）

**使用者故事：** 作為使用者，我想要在繁體中文和英文之間切換介面語言，以便使用我偏好的語言。

#### 驗收標準

1. 當使用者點擊語言切換按鈕時，系統應當在繁體中文和英文之間切換
2. 當切換語言時，系統應當更新所有介面文字為選定的語言
3. 當使用者切換語言時，系統應當將語言偏好設定儲存到本地儲存中
4. 當使用者重新開啟應用程式時，系統應當從本地儲存中恢復先前選擇的語言
5. 當應用程式首次載入且無儲存的語言偏好時，系統應當根據瀏覽器語言設定選擇預設語言

### 需求 13：技術架構

**使用者故事：** 作為開發者，我想要使用現代化的前端技術棧，以便建立高效能和可維護的應用程式。

#### 驗收標準

1. 系統應當使用 Vue 3 Composition API 作為前端框架
2. 系統應當使用 PrimeVue 作為 UI 元件庫
3. 系統應當使用 Vite 作為建置工具
4. 系統應當使用響應式設計以支援不同螢幕尺寸
5. 系統應當將所有使用者資料和偏好設定儲存在瀏覽器的本地儲存中

### 需求 14：鍵盤快捷鍵

**使用者故事：** 作為使用者，我想要使用鍵盤快捷鍵控制播放器，以便更快速地操作音樂播放。

#### 驗收標準

1. 當使用者按下空白鍵時，系統應當切換播放/暫停狀態
2. 當使用者按下右方向鍵時，系統應當播放下一首音樂
3. 當使用者按下左方向鍵時，系統應當播放上一首音樂
4. 當使用者按下上方向鍵時，系統應當增加音量
5. 當使用者按下下方向鍵時，系統應當減少音量
6. 當使用者按下 L 鍵時，系統應當切換當前音樂的收藏狀態
7. 當使用者按下 S 鍵時，系統應當聚焦到搜尋輸入框
8. 當使用者按下 R 鍵時，系統應當切換播放模式（順序播放 → 單曲循環 → 播放清單循環 → 隨機播放）
9. 當使用者在輸入框中輸入時，系統應當停用播放控制快捷鍵以避免衝突

### 需求 15：資料持久化

**使用者故事：** 作為使用者，我想要我的音樂庫和設定在重新開啟應用程式後仍然保留，以便我不需要重新配置。

#### 驗收標準

1. 當使用者關閉應用程式時，系統應當將所有音樂檔案參考儲存到本地儲存中
2. 當使用者關閉應用程式時，系統應當將所有播放清單儲存到本地儲存中
3. 當使用者關閉應用程式時，系統應當將所有收藏狀態儲存到本地儲存中
4. 當使用者關閉應用程式時，系統應當將所有使用者偏好設定儲存到本地儲存中
5. 當使用者重新開啟應用程式時，系統應當從本地儲存中恢復所有資料和設定
6. 當本地儲存資料損壞時，系統應當顯示錯誤訊息並初始化為預設狀態
